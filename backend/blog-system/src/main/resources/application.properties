# ===========================================
# Spring Boot 配置文件 - 博客系统
# 完整版本，替换 application.yml
# ===========================================

# 应用基础配置
spring.application.name=blog-system

# ===========================================
# 数据源配置 - 最重要部分！
# ===========================================
# MySQL 驱动
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 数据库连接URL（包含编码和时区设置）
spring.datasource.url=jdbc:mysql://localhost:3306/blog_system?useSSL=false&useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true

# 数据库用户名和密码（根据实际情况修改）
spring.datasource.username=root
spring.datasource.password=123456

# ===========================================
# HikariCP 连接池配置（性能关键！）
# ===========================================
# 连接超时时间（毫秒）
spring.datasource.hikari.connection-timeout=30000

# 最小空闲连接数
spring.datasource.hikari.minimum-idle=5

# 最大连接池大小
spring.datasource.hikari.maximum-pool-size=20

# 连接空闲超时时间（毫秒）
spring.datasource.hikari.idle-timeout=600000

# 连接最大生命周期（毫秒）
spring.datasource.hikari.max-lifetime=1800000

# 自动提交
spring.datasource.hikari.auto-commit=true

# 连接测试查询（用于保持连接活跃）
spring.datasource.hikari.connection-test-query=SELECT 1

# 连接池名称（便于监控）
spring.datasource.hikari.pool-name=BlogSystemHikariCP

# ===========================================
# SQL 初始化配置（自动建表和插入测试数据）
# ===========================================
# 初始化模式：always=总是执行，embedded=只在内嵌数据库，never=从不
spring.sql.init.mode=always

# 建表SQL脚本位置
spring.sql.init.schema-locations=classpath:sql/schema.sql

# 测试数据脚本位置
spring.sql.init.data-locations=classpath:sql/data.sql

# 出错时继续执行（重要：避免因重复执行SQL而停止启动）
spring.sql.init.continue-on-error=true

# SQL脚本编码
spring.sql.init.encoding=UTF-8

# ===========================================
# 服务器配置
# ===========================================
# 服务端口
server.port=8080

# 应用上下文路径（根路径）
server.servlet.context-path=/

# 会话配置
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# 文件上传配置
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===========================================
# MyBatis 配置
# ===========================================
# 实体类包扫描
mybatis.type-aliases-package=com.blog.entity

# 开启驼峰命名转换
mybatis.configuration.map-underscore-to-camel-case=true

# 打印SQL日志（开发环境开启，生产环境关闭）
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

# Mapper XML文件位置（如果有的话）
# mybatis.mapper-locations=classpath:mapper/*.xml

# ===========================================
# 日志配置（详细配置，方便调试）
# ===========================================
# 日志级别
logging.level.com.blog=DEBUG
logging.level.org.springframework=INFO
logging.level.org.springframework.jdbc=DEBUG
logging.level.org.springframework.transaction=DEBUG
logging.level.com.zaxxer.hikari=DEBUG
logging.level.org.apache.ibatis=DEBUG

# 日志文件输出
# logging.file.name=logs/blog-system.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# 控制台日志格式
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %highlight(%-5level) %cyan(%logger{50}) - %msg%n

# 文件日志格式
# logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n

# ===========================================
# Spring Boot DevTools 配置（热部署）
# ===========================================
spring.devtools.restart.enabled=true
spring.devtools.restart.exclude=static/**,public/**

# 禁用Thymeleaf缓存（开发环境）
spring.thymeleaf.cache=false

# ===========================================
# 应用特定配置
# ===========================================
# 默认分页大小
blog.pagination.default-size=10
blog.pagination.max-size=50

# 文件上传路径（注意：需要确保该目录存在且有写权限）
blog.upload.path=./uploads/
blog.upload.max-size=10MB

# Session配置
blog.session.timeout-minutes=30
blog.session.cookie-name=BLOG_SESSION

# ===========================================
# 跨域配置（已在CorsConfig中配置，这里备份）
# ===========================================
# 如果需要通过properties配置CORS，可以取消注释下面配置
# 但建议使用CorsConfig类配置
# spring.mvc.cors.allowed-origins=http://localhost:3000
# spring.mvc.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# spring.mvc.cors.allowed-headers=*
# spring.mvc.cors.allow-credentials=true

# ===========================================
# 生产环境注意事项（当前为开发环境配置）
# ===========================================
# 生产环境需要：
# 1. 修改数据库密码
# 2. 设置server.servlet.session.cookie.secure=true
# 3. 关闭SQL日志：mybatis.configuration.log-impl=org.apache.ibatis.logging.nologging.NoLoggingImpl
# 4. 开启缓存：spring.thymeleaf.cache=true
# 5. 设置合适的日志级别：logging.level.com.blog=INFO

# ===========================================
# 启动提示信息
# ===========================================
# 应用启动后显示的欢迎信息
blog.welcome-message=博客系统后端已启动，访问 http://localhost:8080 开始使用
blog.version=1.0.0
blog.author=博客系统开发团队

# ===========================================
# 头像上传配置
# ===========================================
# 头像上传目录（绝对路径或相对路径）
blog.upload.avatar-path=./uploads/avatars/

# 头像访问URL前缀
blog.upload.avatar-url=/uploads/avatars/

# 最大头像文件大小（2MB）
blog.upload.avatar-max-size=2MB

# 允许的头像文件类型
blog.upload.avatar-allowed-types=image/jpeg,image/png,image/gif,image/webp